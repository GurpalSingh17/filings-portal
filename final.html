<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Final Output for XML</title>
  <style>
    body { font-family: sans-serif; padding: 1rem; }
    table { border-collapse: collapse; width: 100%; margin-top: 1rem; }
    th, td { border: 1px solid #ccc; padding: 0.5rem; text-align: left; }
    th { background: #f5f5f5; }
    nav a { margin-right: 1rem; }
  </style>
</head>
<body>
  <nav>
    <a href="index.html">Home</a>
    <a href="selected.html">Selected Data</a>
    <a href="final.html">Final Output</a>
  </nav>

  <h1>Final Output for XML</h1>
  <table id="data-table">
    <!-- will be populated by JS -->
  </table>

  <!-- PapaParse for CSV parsing -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
  <script>
    Papa.parse('final_output_for_xml.csv', {
      download: true,
      header: true,
      complete: function(results) {
        const data = results.data;
        if (!data.length) {
          document.getElementById('data-table').innerText = 'No data to display.';
          return;
        }
        const table = document.getElementById('data-table');

        // build header row
        const headerRow = document.createElement('tr');
        Object.keys(data[0]).forEach(key => {
          const th = document.createElement('th');
          th.textContent = key;
          headerRow.appendChild(th);
        });
        table.appendChild(headerRow);

        // build data rows
        data.forEach(row => {
          const tr = document.createElement('tr');
          Object.values(row).forEach(val => {
            const td = document.createElement('td');
            td.textContent = val;
            tr.appendChild(td);
          });
          table.appendChild(tr);
        });
      },
      error: function(err) {
        document.getElementById('data-table').innerText = 'Error loading CSV: ' + err.message;
      }
    });
  </script>
</body>
</html>
